{"version":3,"file":"main.min.js","mappings":"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","sources":["webpack://navier-stokes-webgl/./src/ts/brush.ts","webpack://navier-stokes-webgl/./src/ts/dynamic-obstacle.ts","webpack://navier-stokes-webgl/./src/ts/fluid.ts","webpack://navier-stokes-webgl/./src/ts/gl-utils/fbo.ts","webpack://navier-stokes-webgl/./src/ts/gl-utils/gl-resource.ts","webpack://navier-stokes-webgl/./src/ts/gl-utils/shader.ts","webpack://navier-stokes-webgl/./src/ts/gl-utils/utils.ts","webpack://navier-stokes-webgl/./src/ts/gl-utils/vbo.ts","webpack://navier-stokes-webgl/./src/ts/main.ts","webpack://navier-stokes-webgl/./src/ts/mouse-point-renderer.ts","webpack://navier-stokes-webgl/./src/ts/obstacle-map.ts","webpack://navier-stokes-webgl/./src/ts/parameters.ts","webpack://navier-stokes-webgl/./src/ts/requirements.ts","webpack://navier-stokes-webgl/./src/ts/shaders/brush-shaders.ts","webpack://navier-stokes-webgl/./src/ts/shaders/build-shaders.ts","webpack://navier-stokes-webgl/./src/ts/shaders/fluid-shaders.ts","webpack://navier-stokes-webgl/./src/ts/shaders/obstacle-map-shaders.ts","webpack://navier-stokes-webgl/./src/ts/ws-mouse.ts","webpack://navier-stokes-webgl/webpack/bootstrap","webpack://navier-stokes-webgl/webpack/startup"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar gl_resource_1 = __importDefault(require(\"./gl-utils/gl-resource\"));\nvar Parameters = __importStar(require(\"./parameters\"));\nvar BrushShaders = __importStar(require(\"./shaders/brush-shaders\"));\nvar Brush = (function (_super) {\n    __extends(Brush, _super);\n    function Brush(gl) {\n        var _this = _super.call(this, gl) || this;\n        _this._drawShader = BrushShaders.buildDrawShader(gl);\n        _this.thickness = 2;\n        return _this;\n    }\n    Brush.prototype.freeGLResources = function () {\n        this._drawShader.freeGLResources();\n    };\n    Brush.prototype.draw = function () {\n        var gl = _super.prototype.gl.call(this);\n        var canvas = gl.canvas;\n        var canvasSize = [canvas.clientWidth, canvas.clientHeight];\n        var drawShader = this._drawShader;\n        drawShader.use();\n        var brushSize = [\n            Parameters.brush.radius / canvasSize[0],\n            Parameters.brush.radius / canvasSize[1]\n        ];\n        drawShader.u[\"uBrushSize\"].value = brushSize;\n        drawShader.u[\"uBrushPos\"].value = Parameters.mouse.pos;\n        drawShader.u[\"uThickness\"].value = this.thickness / Parameters.brush.radius;\n        drawShader.bindUniformsAndAttributes();\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n    };\n    return Brush;\n}(gl_resource_1.default));\nexports.default = Brush;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DynamicObstacleSystem = void 0;\nvar DynamicObstacleSystem = (function () {\n    function DynamicObstacleSystem() {\n        this.obstacles = [];\n        this.nextId = 0;\n        this.ws = null;\n        this.initializeRandomObstacles();\n        this.initWebSocket();\n    }\n    DynamicObstacleSystem.prototype.initializeRandomObstacles = function () {\n        var obstacleCount = 15;\n        for (var i = 0; i < obstacleCount; i++) {\n            var pos = [\n                Math.random() * 0.6 + 0.2,\n                Math.random() * 0.6 + 0.2\n            ];\n            var baseSize = 0.015;\n            var sizeVariation = Math.random() * 0.01;\n            var size = [baseSize + sizeVariation, baseSize + sizeVariation];\n            var obstacle = {\n                id: this.nextId++,\n                pos: pos,\n                vel: [0, 0],\n                size: size,\n                mass: 1.0 + Math.random() * 0.5,\n                friction: 0.95,\n                restitution: 0.8\n            };\n            this.obstacles.push(obstacle);\n        }\n        console.log(\"\\u2728 \\u521D\\u59CB\\u5316\\u52D5\\u614B\\u969C\\u7919\\u7269\\u7CFB\\u7D71\\uFF0C\\u5275\\u5EFA\\u4E86 \".concat(obstacleCount, \" \\u500B\\u96A8\\u6A5F\\u969C\\u7919\\u7269\"));\n        this.sendObstaclePositions();\n    };\n    DynamicObstacleSystem.prototype.checkCollisionWithMousePoints = function (points) {\n        var _this = this;\n        points.forEach(function (point, pointIndex) {\n            var _a = point.pos, x = _a[0], y = _a[1];\n            _this.obstacles.forEach(function (obstacle, obstacleIndex) {\n                var distance = Math.sqrt(Math.pow(x - obstacle.pos[0], 2) +\n                    Math.pow(y - obstacle.pos[1], 2));\n                var collisionThreshold = 0.05;\n                if (distance < collisionThreshold) {\n                    console.log(\"WS Mouse Point \".concat(pointIndex, \" \\u78B0\\u649E\\u5230\\u52D5\\u614B\\u969C\\u7919\\u7269 \").concat(obstacle.id, \"\\uFF01\\u4F4D\\u7F6E: [\").concat(x.toFixed(3), \", \").concat(y.toFixed(3), \"], \\u969C\\u7919\\u7269\\u4F4D\\u7F6E: [\").concat(obstacle.pos[0].toFixed(3), \", \").concat(obstacle.pos[1].toFixed(3), \"]\"));\n                    _this.handleCollision(point, obstacle, distance);\n                }\n            });\n        });\n    };\n    DynamicObstacleSystem.prototype.handleCollision = function (point, obstacle, distance) {\n        var _a, _b;\n        if (distance === 0)\n            return;\n        var vectorX = point.pos[0] - obstacle.pos[0];\n        var vectorY = point.pos[1] - obstacle.pos[1];\n        var normalizedX = vectorX / distance;\n        var normalizedY = vectorY / distance;\n        var collisionSpeed = ((_b = (_a = window.Parameters) === null || _a === void 0 ? void 0 : _a.collision) === null || _b === void 0 ? void 0 : _b.speed) || 0.02;\n        var moveX = -normalizedX * collisionSpeed;\n        var moveY = -normalizedY * collisionSpeed;\n        obstacle.pos[0] += moveX;\n        obstacle.pos[1] += moveY;\n        var halfSizeX = obstacle.size[0] * 0.5;\n        var halfSizeY = obstacle.size[1] * 0.5;\n        obstacle.pos[0] = Math.max(halfSizeX, Math.min(1 - halfSizeX, obstacle.pos[0]));\n        obstacle.pos[1] = Math.max(halfSizeY, Math.min(1 - halfSizeY, obstacle.pos[1]));\n        this.sendObstaclePositions();\n    };\n    DynamicObstacleSystem.prototype.getObstacles = function () {\n        return this.obstacles;\n    };\n    DynamicObstacleSystem.prototype.clear = function () {\n        this.obstacles = [];\n        this.nextId = 0;\n    };\n    DynamicObstacleSystem.prototype.reset = function () {\n        this.clear();\n        this.initializeRandomObstacles();\n    };\n    DynamicObstacleSystem.prototype.initWebSocket = function () {\n        var _this = this;\n        this.ws = new WebSocket('ws://127.0.0.1:9980');\n        this.ws.onopen = function () {\n            _this.sendObstaclePositions();\n        };\n        this.ws.onerror = function (err) {\n            console.error('Obstacle WS error', err);\n        };\n    };\n    DynamicObstacleSystem.prototype.sendObstaclePositions = function () {\n        if (this.ws && this.ws.readyState === WebSocket.OPEN) {\n            var positions = this.obstacles.map(function (o) { return [o.pos[0], o.pos[1]]; });\n            var msg = 'obs' + JSON.stringify(positions);\n            this.ws.send(msg);\n        }\n    };\n    return DynamicObstacleSystem;\n}());\nexports.DynamicObstacleSystem = DynamicObstacleSystem;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar gl_resource_1 = __importDefault(require(\"./gl-utils/gl-resource\"));\nvar fbo_1 = __importDefault(require(\"./gl-utils/fbo\"));\nvar Parameters = __importStar(require(\"./parameters\"));\nvar FluidShaders = __importStar(require(\"./shaders/fluid-shaders\"));\nrequire(\"./page-interface-generated\");\nvar Fluid = (function (_super) {\n    __extends(Fluid, _super);\n    function Fluid(gl, width, height) {\n        var _this = _super.call(this, gl) || this;\n        _this._useFloatTextures = false;\n        _this.viscosity = 0.0002;\n        _this.colorIntensity = 0.033;\n        _this.color = true;\n        _this.warmColors = false;\n        _this.reset(width, height);\n        return _this;\n    }\n    Fluid.prototype.freeGLResources = function () {\n        if (this._FBO) {\n            this._FBO.freeGLResources();\n        }\n        this.freeTextures();\n        this.freeShaders();\n    };\n    Fluid.prototype.freeTextures = function () {\n        var gl = _super.prototype.gl.call(this);\n        if (this._velTextures) {\n            gl.deleteTexture(this._velTextures[0]);\n            gl.deleteTexture(this._velTextures[1]);\n        }\n        gl.deleteTexture(this._tmpTexture);\n        gl.deleteTexture(this._pressureTexture);\n        gl.deleteTexture(this._divergenceTexture);\n    };\n    Fluid.prototype.freeShaders = function () {\n        function freeShader(shader) {\n            if (shader) {\n                shader.freeGLResources();\n            }\n        }\n        freeShader(this._drawVelocityShader);\n        freeShader(this._drawPressureShader);\n        freeShader(this._addVelShader);\n        freeShader(this._advectShader);\n        freeShader(this._jacobiPressureShader);\n        freeShader(this._divergenceShader);\n        freeShader(this._substractGradientShader);\n        freeShader(this._obstaclesVelocityShader);\n    };\n    Fluid.prototype.reset = function (width, height) {\n        this.freeGLResources();\n        this._width = width;\n        this._height = height;\n        this.dx = 1 / Math.min(width, height);\n        this._FBO = new fbo_1.default(_super.prototype.gl.call(this), width, height);\n        this.initTextures();\n        this.buildShaders();\n        this._currIndex = 0;\n    };\n    Object.defineProperty(Fluid.prototype, \"useFloatTextures\", {\n        set: function (bool) {\n            if (bool !== this._useFloatTextures) {\n                this._useFloatTextures = bool;\n                this.reset(this._width, this._height);\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Fluid.prototype, \"minNbIterations\", {\n        set: function (value) {\n            this._nbIterations = 2 * Math.ceil(value / 2) + 1;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Fluid.prototype, \"texelSize\", {\n        get: function () {\n            return [1 / this._width, 1 / this._height];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Fluid.prototype, \"velTexture\", {\n        get: function () {\n            return this._velTextures[this.currIndex];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Fluid.prototype.update = function (obstacleMap) {\n        var gl = _super.prototype.gl.call(this);\n        var dt = this.timestep;\n        gl.clearColor(0.5, 0, 0.5, 0);\n        var multiPoints = window.multiMousePoints || [];\n        var canvas = gl.canvas;\n        var canvasSize = [canvas.clientWidth, canvas.clientHeight];\n        var brushSize = [\n            Parameters.brush.radius / canvasSize[0],\n            Parameters.brush.radius / canvasSize[1]\n        ];\n        for (var _i = 0, multiPoints_1 = multiPoints; _i < multiPoints_1.length; _i++) {\n            var pt = multiPoints_1[_i];\n            var pos = pt.pos;\n            var vel = [\n                pt.movement[0] * Parameters.brush.strength,\n                pt.movement[1] * Parameters.brush.strength,\n            ];\n            this.addVel(pos, brushSize, vel);\n        }\n        this.advect(dt);\n        this.obstaclesVelocity(obstacleMap);\n        this.project(obstacleMap);\n        this.obstaclesVelocity(obstacleMap);\n    };\n    Fluid.prototype.addVel = function (pos, size, vel) {\n        var gl = this.gl();\n        var addVelShader = this._addVelShader;\n        addVelShader.u[\"uVel\"].value = this._velTextures[this.currIndex];\n        addVelShader.u[\"uBrushPos\"].value = pos;\n        addVelShader.u[\"uBrushSize\"].value = size;\n        addVelShader.u[\"uAddVel\"].value = vel;\n        addVelShader.use();\n        this._FBO.bind([this._velTextures[this.nextIndex]]);\n        addVelShader.bindUniformsAndAttributes();\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n        this.switchBuffers();\n    };\n    Fluid.prototype.drawVelocity = function () {\n        var gl = this.gl();\n        var drawShader = this._drawVelocityShader;\n        drawShader.u[\"uVel\"].value = this._velTextures[this.currIndex];\n        drawShader.u[\"uColorIntensity\"].value = this.colorIntensity;\n        drawShader.u[\"uBlacknWhite\"].value = !this.color;\n        drawShader.u[\"uWarmColors\"].value = this.warmColors;\n        drawShader.use();\n        drawShader.bindUniformsAndAttributes();\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n    };\n    Fluid.prototype.drawPressure = function () {\n        var gl = this.gl();\n        var drawPressureShader = this._drawPressureShader;\n        drawPressureShader.u[\"uPressure\"].value = this._pressureTexture;\n        drawPressureShader.u[\"uColorIntensity\"].value = this.colorIntensity;\n        drawPressureShader.u[\"uBlacknWhite\"].value = !this.color;\n        drawPressureShader.use();\n        drawPressureShader.bindUniformsAndAttributes();\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n    };\n    Object.defineProperty(Fluid.prototype, \"currIndex\", {\n        get: function () {\n            return this._currIndex;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Fluid.prototype, \"nextIndex\", {\n        get: function () {\n            return (this._currIndex + 1) % 2;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Fluid.prototype.switchBuffers = function () {\n        this._currIndex = this.nextIndex;\n    };\n    Fluid.prototype.obstaclesVelocity = function (obstacleMap) {\n        var gl = this.gl();\n        var obstacleVelocityShader = this._obstaclesVelocityShader;\n        obstacleVelocityShader.u[\"uVelocities\"].value = this._velTextures[this.currIndex];\n        obstacleVelocityShader.u[\"uObstacles\"].value = obstacleMap.texture;\n        obstacleVelocityShader.u[\"uTexelSize\"].value = this.texelSize;\n        this._FBO.bind([this._velTextures[this.nextIndex]]);\n        obstacleVelocityShader.use();\n        obstacleVelocityShader.bindUniformsAndAttributes();\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n        this.switchBuffers();\n    };\n    Fluid.prototype.advect = function (dt) {\n        var gl = this.gl();\n        var advectShader = this._advectShader;\n        advectShader.u[\"uVelUnit\"].value = [128 / this._width, 128 / this._height];\n        advectShader.u[\"uDt\"].value = dt;\n        advectShader.u[\"uQuantity\"].value = this._velTextures[this.currIndex];\n        advectShader.u[\"uVel\"].value = this._velTextures[this.currIndex];\n        this._FBO.bind([this._velTextures[this.nextIndex]]);\n        advectShader.use();\n        advectShader.bindUniformsAndAttributes();\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n        this.switchBuffers();\n    };\n    Fluid.prototype.computeDivergence = function () {\n        var gl = this.gl();\n        var divergenceShader = this._divergenceShader;\n        divergenceShader.u[\"uTexelSize\"].value = this.texelSize;\n        divergenceShader.u[\"uVelocity\"].value = this._velTextures[this.currIndex];\n        this._FBO.bind([this._divergenceTexture]);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        divergenceShader.use();\n        divergenceShader.bindUniformsAndAttributes();\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n    };\n    Fluid.prototype.computePressure = function (obstacleMap) {\n        var gl = this.gl();\n        var jacobiPressureShader = this._jacobiPressureShader;\n        var alpha = -.5 * this.dx;\n        var beta = 4;\n        var dst = this._pressureTexture;\n        var cstTerm = this._divergenceTexture;\n        jacobiPressureShader.u[\"uTexelSize\"].value = this.texelSize;\n        jacobiPressureShader.u[\"uAlpha\"].value = alpha;\n        jacobiPressureShader.u[\"uInvBeta\"].value = 1 / beta;\n        jacobiPressureShader.u[\"uConstantTerm\"].value = cstTerm;\n        jacobiPressureShader.u[\"uObstacles\"].value = obstacleMap.texture;\n        var index = 0;\n        var textures = [this._tmpTexture, dst];\n        this._FBO.bind([this._tmpTexture]);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        jacobiPressureShader.use();\n        jacobiPressureShader.bindAttributes();\n        for (var i = 0; i < this._nbIterations; ++i) {\n            jacobiPressureShader.u[\"uPrevIter\"].value = textures[index];\n            this._FBO.bind([textures[(index + 1) % 2]]);\n            jacobiPressureShader.bindUniforms();\n            gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n            index = (index + 1) % 2;\n        }\n    };\n    Fluid.prototype.substractPressureGradient = function () {\n        var gl = this.gl();\n        var substractGradientShader = this._substractGradientShader;\n        substractGradientShader.u[\"uVelocities\"].value = this._velTextures[this.currIndex];\n        substractGradientShader.u[\"uPressure\"].value = this._pressureTexture;\n        substractGradientShader.u[\"uTexelSize\"].value = this.texelSize;\n        substractGradientShader.u[\"uHalfInvDx\"].value = 0.5 / this.dx;\n        this._FBO.bind([this._velTextures[this.nextIndex]]);\n        substractGradientShader.use();\n        substractGradientShader.bindUniformsAndAttributes();\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n        this.switchBuffers();\n    };\n    Fluid.prototype.project = function (obstacleMap) {\n        this.computeDivergence();\n        this.computePressure(obstacleMap);\n        this.substractPressureGradient();\n    };\n    Fluid.prototype.initTextures = function () {\n        this.freeTextures();\n        var gl = _super.prototype.gl.call(this);\n        var width = this._width;\n        var height = this._height;\n        var floatTexels = [];\n        for (var i = 0; i < 4 * width * height; ++i) {\n            floatTexels.push(0);\n        }\n        var floatData = new Float32Array(floatTexels);\n        var uintTexels = [];\n        for (var i = 0; i < 4 * width * height; ++i) {\n            uintTexels.push(127);\n        }\n        var uintData = new Uint8Array(uintTexels);\n        var velFormat = (this._useFloatTextures) ? gl.FLOAT : gl.UNSIGNED_BYTE;\n        var velData = (this._useFloatTextures) ? floatData : uintData;\n        var textures = [];\n        for (var i = 0; i < 2; ++i) {\n            var texture = gl.createTexture();\n            gl.bindTexture(gl.TEXTURE_2D, texture);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, velFormat, velData);\n            textures.push(texture);\n        }\n        for (var i = 0; i < 3; ++i) {\n            var texture = gl.createTexture();\n            gl.bindTexture(gl.TEXTURE_2D, texture);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, uintData);\n            textures.push(texture);\n        }\n        for (var _i = 0, textures_1 = textures; _i < textures_1.length; _i++) {\n            var texture = textures_1[_i];\n            gl.bindTexture(gl.TEXTURE_2D, texture);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        }\n        gl.bindTexture(gl.TEXTURE_2D, null);\n        this._velTextures = [textures[0], textures[1]];\n        this._tmpTexture = textures[2];\n        this._pressureTexture = textures[3];\n        this._divergenceTexture = textures[4];\n    };\n    Fluid.prototype.buildShaders = function () {\n        this.freeShaders();\n        FluidShaders.setUseFloatTextures(this._useFloatTextures);\n        var gl = _super.prototype.gl.call(this);\n        this._drawVelocityShader = FluidShaders.buildDrawVelocityShader(gl);\n        this._drawPressureShader = FluidShaders.buildDrawPressureShader(gl);\n        this._addVelShader = FluidShaders.buildAddVelShader(gl);\n        this._advectShader = FluidShaders.buildAdvectShader(gl);\n        this._jacobiPressureShader = FluidShaders.buildJacobiPressureShader(gl);\n        this._divergenceShader = FluidShaders.buildDivergenceShader(gl);\n        this._substractGradientShader = FluidShaders.buildSubstractGradientShader(gl);\n        this._obstaclesVelocityShader = FluidShaders.buildObstaclesVelocityShader(gl);\n    };\n    return Fluid;\n}(gl_resource_1.default));\nexports.default = Fluid;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar gl_resource_1 = __importDefault(require(\"./gl-resource\"));\nvar FBO = (function (_super) {\n    __extends(FBO, _super);\n    function FBO(gl, width, height) {\n        var _this = _super.call(this, gl) || this;\n        _this.id = gl.createFramebuffer();\n        _this.width = width;\n        _this.height = height;\n        return _this;\n    }\n    FBO.prototype.bind = function (colorBuffers, depthBuffer) {\n        if (depthBuffer === void 0) { depthBuffer = null; }\n        var gl = _super.prototype.gl.call(this);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.id);\n        gl.viewport(0, 0, this.width, this.height);\n        for (var i = 0; i < colorBuffers.length; ++i) {\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl['COLOR_ATTACHMENT' + i], gl.TEXTURE_2D, colorBuffers[i], 0);\n        }\n        if (depthBuffer) {\n            gl.bindRenderbuffer(gl.RENDERBUFFER, depthBuffer);\n            gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, depthBuffer);\n        }\n    };\n    FBO.bindDefault = function (gl) {\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    };\n    FBO.prototype.freeGLResources = function () {\n        _super.prototype.gl.call(this).deleteFramebuffer(this.id);\n        this.id = null;\n    };\n    return FBO;\n}(gl_resource_1.default));\nexports.default = FBO;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar GLResource = (function () {\n    function GLResource(gl) {\n        this._gl = gl;\n    }\n    GLResource.prototype.gl = function () {\n        return this._gl;\n    };\n    return GLResource;\n}());\nexports.default = GLResource;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar gl_resource_1 = __importDefault(require(\"./gl-resource\"));\nfunction notImplemented(gl, location, value) {\n    alert(\"NOT IMPLEMENTED YET\");\n}\nfunction bindUniformFloat(gl, location, value) {\n    if (Array.isArray(value)) {\n        gl.uniform1fv(location, value);\n    }\n    else {\n        gl.uniform1f(location, value);\n    }\n}\nfunction bindUniformFloat2v(gl, location, value) {\n    gl.uniform2fv(location, value);\n}\nfunction bindUniformFloat3v(gl, location, value) {\n    gl.uniform3fv(location, value);\n}\nfunction bindUniformFloat4v(gl, location, value) {\n    gl.uniform4fv(location, value);\n}\nfunction bindUniformInt(gl, location, value) {\n    if (Array.isArray(value)) {\n        gl.uniform1iv(location, value);\n    }\n    else {\n        gl.uniform1iv(location, value);\n    }\n}\nfunction bindUniformInt2v(gl, location, value) {\n    gl.uniform2iv(location, value);\n}\nfunction bindUniformInt3v(gl, location, value) {\n    gl.uniform3iv(location, value);\n}\nfunction bindUniformInt4v(gl, location, value) {\n    gl.uniform4iv(location, value);\n}\nfunction bindUniformBool(gl, location, value) {\n    gl.uniform1i(location, +value);\n}\nfunction bindUniformBool2v(gl, location, value) {\n    gl.uniform2iv(location, value);\n}\nfunction bindUniformBool3v(gl, location, value) {\n    gl.uniform3iv(location, value);\n}\nfunction bindUniformBool4v(gl, location, value) {\n    gl.uniform4iv(location, value);\n}\nfunction bindUniformFloatMat2(gl, location, value) {\n    gl.uniformMatrix2fv(location, false, value);\n}\nfunction bindUniformFloatMat3(gl, location, value) {\n    gl.uniformMatrix3fv(location, false, value);\n}\nfunction bindUniformFloatMat4(gl, location, value) {\n    gl.uniformMatrix4fv(location, false, value);\n}\nfunction bindSampler2D(gl, location, unitNb, value) {\n    gl.uniform1i(location, unitNb);\n    gl.activeTexture(gl['TEXTURE' + unitNb]);\n    gl.bindTexture(gl.TEXTURE_2D, value);\n}\nfunction bindSamplerCube(gl, location, unitNb, value) {\n    gl.uniform1i(location, unitNb);\n    gl.activeTexture(gl['TEXTURE' + unitNb]);\n    gl.bindTexture(gl.TEXTURE_CUBE_MAP, value);\n}\n;\nvar types = {\n    0x8B50: { str: 'FLOAT_VEC2', binder: bindUniformFloat2v },\n    0x8B51: { str: 'FLOAT_VEC3', binder: bindUniformFloat3v },\n    0x8B52: { str: 'FLOAT_VEC4', binder: bindUniformFloat4v },\n    0x8B53: { str: 'INT_VEC2', binder: bindUniformInt2v },\n    0x8B54: { str: 'INT_VEC3', binder: bindUniformInt3v },\n    0x8B55: { str: 'INT_VEC4', binder: bindUniformInt4v },\n    0x8B56: { str: 'BOOL', binder: bindUniformBool },\n    0x8B57: { str: 'BOOL_VEC2', binder: bindUniformBool2v },\n    0x8B58: { str: 'BOOL_VEC3', binder: bindUniformBool3v },\n    0x8B59: { str: 'BOOL_VEC4', binder: bindUniformBool4v },\n    0x8B5A: { str: 'FLOAT_MAT2', binder: bindUniformFloatMat2 },\n    0x8B5B: { str: 'FLOAT_MAT3', binder: bindUniformFloatMat3 },\n    0x8B5C: { str: 'FLOAT_MAT4', binder: bindUniformFloatMat4 },\n    0x8B5E: { str: 'SAMPLER_2D', binder: bindSampler2D },\n    0x8B60: { str: 'SAMPLER_CUBE', binder: bindSamplerCube },\n    0x1400: { str: 'BYTE', binder: notImplemented },\n    0x1401: { str: 'UNSIGNED_BYTE', binder: notImplemented },\n    0x1402: { str: 'SHORT', binder: notImplemented },\n    0x1403: { str: 'UNSIGNED_SHORT', binder: notImplemented },\n    0x1404: { str: 'INT', binder: bindUniformInt },\n    0x1405: { str: 'UNSIGNED_INT', binder: notImplemented },\n    0x1406: { str: 'FLOAT', binder: bindUniformFloat }\n};\nvar ShaderProgram = (function (_super) {\n    __extends(ShaderProgram, _super);\n    function ShaderProgram(gl, vertexSource, fragmentSource) {\n        var _this = this;\n        function createShader(type, source) {\n            var shader = gl.createShader(type);\n            gl.shaderSource(shader, source);\n            gl.compileShader(shader);\n            var success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n            if (!success) {\n                console.log(gl.getShaderInfoLog(shader));\n                gl.deleteShader(shader);\n                return null;\n            }\n            return shader;\n        }\n        _this = _super.call(this, gl) || this;\n        _this.id = null;\n        _this.uCount = 0;\n        _this.aCount = 0;\n        var vertexShader = createShader(gl.VERTEX_SHADER, vertexSource);\n        var fragmentShader = createShader(gl.FRAGMENT_SHADER, fragmentSource);\n        var id = gl.createProgram();\n        gl.attachShader(id, vertexShader);\n        gl.attachShader(id, fragmentShader);\n        gl.linkProgram(id);\n        var success = gl.getProgramParameter(id, gl.LINK_STATUS);\n        if (!success) {\n            console.log(gl.getProgramInfoLog(id));\n            gl.deleteProgram(id);\n        }\n        else {\n            _this.id = id;\n            _this.introspection();\n        }\n        return _this;\n    }\n    ShaderProgram.prototype.freeGLResources = function () {\n        _super.prototype.gl.call(this).deleteProgram(this.id);\n        this.id = null;\n    };\n    ShaderProgram.prototype.introspection = function () {\n        var gl = _super.prototype.gl.call(this);\n        this.uCount = gl.getProgramParameter(this.id, gl.ACTIVE_UNIFORMS);\n        this.u = [];\n        for (var i = 0; i < this.uCount; ++i) {\n            var uniform = gl.getActiveUniform(this.id, i);\n            var name_1 = uniform.name;\n            this.u[name_1] = {\n                value: null,\n                loc: gl.getUniformLocation(this.id, name_1),\n                size: uniform.size,\n                type: uniform.type,\n            };\n        }\n        this.aCount = gl.getProgramParameter(this.id, gl.ACTIVE_ATTRIBUTES);\n        this.a = [];\n        for (var i = 0; i < this.aCount; ++i) {\n            var attribute = gl.getActiveAttrib(this.id, i);\n            var name_2 = attribute.name;\n            this.a[name_2] = {\n                VBO: null,\n                loc: gl.getAttribLocation(this.id, name_2),\n                size: attribute.size,\n                type: attribute.type,\n            };\n        }\n    };\n    ShaderProgram.prototype.use = function () {\n        _super.prototype.gl.call(this).useProgram(this.id);\n    };\n    ShaderProgram.prototype.bindUniforms = function () {\n        var gl = _super.prototype.gl.call(this);\n        var currTextureUnitNb = 0;\n        for (var uName in this.u) {\n            var uniform = this.u[uName];\n            if (uniform.value !== null) {\n                if (uniform.type === 0x8B5E || uniform.type === 0x8B60) {\n                    var unitNb = currTextureUnitNb;\n                    types[uniform.type].binder(gl, uniform.loc, unitNb, uniform.value);\n                    currTextureUnitNb++;\n                }\n                else {\n                    types[uniform.type].binder(gl, uniform.loc, uniform.value);\n                }\n            }\n        }\n    };\n    ShaderProgram.prototype.bindAttributes = function () {\n        for (var aName in this.a) {\n            var attribute = this.a[aName];\n            if (attribute.VBO !== null) {\n                attribute.VBO.bind(attribute.loc);\n            }\n        }\n    };\n    ShaderProgram.prototype.bindUniformsAndAttributes = function () {\n        this.bindUniforms();\n        this.bindAttributes();\n    };\n    return ShaderProgram;\n}(gl_resource_1.default));\nexports.default = ShaderProgram;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resizeCanvas = void 0;\nfunction resizeCanvas(gl, hidpi) {\n    if (hidpi === void 0) { hidpi = false; }\n    var cssPixel = (hidpi) ? window.devicePixelRatio : 1;\n    var canvas = gl.canvas;\n    var width = Math.floor(canvas.clientWidth * cssPixel);\n    var height = Math.floor(canvas.clientHeight * cssPixel);\n    if (canvas.width != width || canvas.height != height) {\n        canvas.width = width;\n        canvas.height = height;\n    }\n}\nexports.resizeCanvas = resizeCanvas;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar gl_resource_1 = __importDefault(require(\"./gl-resource\"));\nvar VBO = (function (_super) {\n    __extends(VBO, _super);\n    function VBO(gl, array, size, type) {\n        var _this = _super.call(this, gl) || this;\n        _this.id = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, _this.id);\n        gl.bufferData(gl.ARRAY_BUFFER, array, gl.STATIC_DRAW);\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        _this.size = size;\n        _this.type = type;\n        _this.normalize = false;\n        _this.stride = 0;\n        _this.offset = 0;\n        return _this;\n    }\n    VBO.prototype.freeGLResources = function () {\n        this.gl().deleteBuffer(this.id);\n        this.id = null;\n    };\n    VBO.createQuad = function (gl, minX, minY, maxX, maxY) {\n        var vert = [\n            minX, minY,\n            maxX, minY,\n            minX, maxY,\n            maxX, maxY,\n        ];\n        return new VBO(gl, new Float32Array(vert), 2, gl.FLOAT);\n    };\n    VBO.prototype.bind = function (location) {\n        var gl = _super.prototype.gl.call(this);\n        gl.enableVertexAttribArray(location);\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.id);\n        gl.vertexAttribPointer(location, this.size, this.type, this.normalize, this.stride, this.offset);\n    };\n    return VBO;\n}(gl_resource_1.default));\n;\nexports.default = VBO;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Utils = __importStar(require(\"./gl-utils/utils\"));\nvar fbo_1 = __importDefault(require(\"./gl-utils/fbo\"));\nvar Parameters = __importStar(require(\"./parameters\"));\nvar brush_1 = __importDefault(require(\"./brush\"));\nvar obstacle_map_1 = __importDefault(require(\"./obstacle-map\"));\nvar fluid_1 = __importDefault(require(\"./fluid\"));\nvar Requirements = __importStar(require(\"./requirements\"));\nrequire(\"./page-interface-generated\");\nvar ws_mouse_1 = require(\"./ws-mouse\");\nvar mouse_point_renderer_1 = require(\"./mouse-point-renderer\");\nvar dynamic_obstacle_1 = require(\"./dynamic-obstacle\");\nvar obstaclePosition = [0.3, 0.5];\nvar obstacleMaps = [];\nvar webgl;\nvar obstacleSize = 256;\nvar dynamicObstacleSystem = null;\nvar mousePointRenderer = null;\nfunction updateFluidWithMultiMouse(points) {\n    window.multiMousePoints = points;\n    if (mousePointRenderer) {\n        mousePointRenderer.setVisible(Parameters.display.mousePoints);\n        mousePointRenderer.updatePoints(points);\n    }\n}\nfunction checkCollisionWithObstacles(points) {\n    if (!obstacleMaps || !webgl)\n        return;\n    var currentObstacleMap = obstacleMaps[Parameters.obstacles];\n    if (!currentObstacleMap)\n        return;\n    if (Parameters.obstacles === \"dynamic\") {\n        if (dynamicObstacleSystem) {\n            dynamicObstacleSystem.checkCollisionWithMousePoints(points);\n        }\n        return;\n    }\n    points.forEach(function (point, index) {\n        var _a = point.pos, x = _a[0], y = _a[1];\n        if (Parameters.obstacles === \"one\") {\n            var distance = Math.sqrt(Math.pow(x - obstaclePosition[0], 2) +\n                Math.pow(y - obstaclePosition[1], 2));\n            if (distance < 0.05) {\n                console.log(\"WS Mouse Point \".concat(index, \" \\u78B0\\u649E\\u5230\\u969C\\u7919\\u7269\\uFF01\\u4F4D\\u7F6E: [\").concat(x.toFixed(3), \", \").concat(y.toFixed(3), \"], \\u969C\\u7919\\u7269\\u4F4D\\u7F6E: [\").concat(obstaclePosition[0].toFixed(3), \", \").concat(obstaclePosition[1].toFixed(3), \"]\"));\n                var vectorX = x - obstaclePosition[0];\n                var vectorY = y - obstaclePosition[1];\n                var vectorLength = Math.sqrt(vectorX * vectorX + vectorY * vectorY);\n                if (vectorLength > 0) {\n                    var normalizedX = vectorX / vectorLength;\n                    var normalizedY = vectorY / vectorLength;\n                    var moveX = -normalizedX * Parameters.collision.speed;\n                    var moveY = -normalizedY * Parameters.collision.speed;\n                    moveObstacle(moveX, moveY);\n                }\n            }\n        }\n        else if (Parameters.obstacles === \"many\") {\n            for (var iX = 0; iX < 5; ++iX) {\n                for (var iY = -iX / 2; iY <= iX / 2; ++iY) {\n                    var obstacleX = 0.3 + iX * 0.07;\n                    var obstacleY = 0.5 + iY * 0.08;\n                    var distance = Math.sqrt(Math.pow(x - obstacleX, 2) +\n                        Math.pow(y - obstacleY, 2));\n                    if (distance < 0.03) {\n                        console.log(\"WS Mouse Point \".concat(index, \" \\u78B0\\u649E\\u5230\\u591A\\u969C\\u7919\\u7269\\uFF01\\u4F4D\\u7F6E: [\").concat(x.toFixed(3), \", \").concat(y.toFixed(3), \"], \\u969C\\u7919\\u7269\\u4F4D\\u7F6E: [\").concat(obstacleX.toFixed(3), \", \").concat(obstacleY.toFixed(3), \"]\"));\n                        return;\n                    }\n                }\n            }\n        }\n    });\n}\nwindow.checkCollisionWithObstacles = checkCollisionWithObstacles;\nwindow.dynamicObstacleSystem = null;\nvar ws = new ws_mouse_1.MultiMouseWS(\"ws://localhost:9980\", updateFluidWithMultiMouse, 10);\nws.connect();\nfunction initGL(canvas, flags) {\n    function setError(message) {\n        Page.Demopage.setErrorMessage(\"webgl-support\", message);\n    }\n    var gl = canvas.getContext(\"webgl\", flags);\n    if (!gl) {\n        gl = canvas.getContext(\"experimental-webgl\", flags);\n        if (!gl) {\n            setError(\"Your browser or device does not seem to support WebGL.\");\n            return null;\n        }\n        setError(\"Your browser or device only supports experimental WebGL.\\n\" +\n            \"The simulation may not run as expected.\");\n    }\n    if (gl) {\n        canvas.style.cursor = \"none\";\n        gl.disable(gl.CULL_FACE);\n        gl.disable(gl.DEPTH_TEST);\n        gl.disable(gl.BLEND);\n        gl.clearColor(0.0, 0.0, 0.0, 1.0);\n        Utils.resizeCanvas(gl, false);\n    }\n    return gl;\n}\nfunction main() {\n    var canvas = Page.Canvas.getCanvas();\n    if (!canvas) {\n        console.error(\"Canvas element not found\");\n        return;\n    }\n    var gl = initGL(canvas, { alpha: false });\n    if (!gl || !Requirements.check(gl))\n        return;\n    webgl = gl;\n    mousePointRenderer = new mouse_point_renderer_1.MousePointRenderer(canvas);\n    var extensions = [\n        \"OES_texture_float\",\n        \"WEBGL_color_buffer_float\",\n        \"OES_texture_float_linear\",\n    ];\n    Requirements.loadExtensions(webgl, extensions);\n    var size = 256;\n    obstacleSize = size;\n    var fluid = new fluid_1.default(webgl, size, size);\n    var brush = new brush_1.default(webgl);\n    obstacleMaps[\"none\"] = new obstacle_map_1.default(webgl, size, size);\n    rebuildObstacleMapOne(obstacleMaps, webgl, size, obstaclePosition);\n    obstacleMaps[\"many\"] = new obstacle_map_1.default(webgl, size, size);\n    {\n        var size_1 = [0.012, 0.012];\n        for (var iX = 0; iX < 5; ++iX) {\n            for (var iY = -iX / 2; iY <= iX / 2; ++iY) {\n                size_1 = [size_1[0] + 0.0005, size_1[1] + 0.0005];\n                var pos = [0.3 + iX * 0.07, 0.5 + iY * 0.08];\n                obstacleMaps[\"many\"].addObstacle(size_1, pos);\n            }\n        }\n    }\n    dynamicObstacleSystem = new dynamic_obstacle_1.DynamicObstacleSystem();\n    window.dynamicObstacleSystem = dynamicObstacleSystem;\n    obstacleMaps[\"dynamic\"] = new obstacle_map_1.default(webgl, size, size);\n    rebuildDynamicObstacleMap();\n    Parameters.bind(fluid);\n    setupObstacleControls();\n    var instantFPS = 0;\n    var updateFpsText = function () {\n        Page.Canvas.setIndicatorText(\"fps\", instantFPS.toFixed(0));\n    };\n    setInterval(updateFpsText, 1000);\n    var lastUpdate = 0;\n    function mainLoop(time) {\n        time *= 0.001;\n        var dt = time - lastUpdate;\n        instantFPS = 1 / dt;\n        lastUpdate = time;\n        dt = Math.min(dt, 1 / 10);\n        var obstacleMap = obstacleMaps[Parameters.obstacles];\n        if (Parameters.obstacles === \"dynamic\" && dynamicObstacleSystem) {\n            rebuildDynamicObstacleMap();\n        }\n        if (Parameters.fluid.stream) {\n            fluid.addVel([0.5, 0.9], [0.3, 0.05], [0, -0.4]);\n        }\n        fluid.update(obstacleMap);\n        fbo_1.default.bindDefault(webgl);\n        webgl.clear(webgl.COLOR_BUFFER_BIT | webgl.DEPTH_BUFFER_BIT);\n        if (Parameters.display.velocity) {\n            fluid.drawVelocity();\n        }\n        else if (Parameters.display.pressure) {\n            fluid.drawPressure();\n        }\n        if (Parameters.display.brush) {\n            brush.draw();\n        }\n        if (Parameters.display.obstacles) {\n            obstacleMap.draw();\n        }\n        if (Parameters.display.velocity && Parameters.display.pressure) {\n            webgl.viewport(10, 10, 128, 128);\n            fluid.drawPressure();\n        }\n        requestAnimationFrame(mainLoop);\n    }\n    requestAnimationFrame(mainLoop);\n}\nfunction rebuildObstacleMapOne(obstacleMaps, gl, size, pos) {\n    obstacleMaps[\"one\"] = new obstacle_map_1.default(gl, size, size);\n    obstacleMaps[\"one\"].addObstacle([0.015, 0.015], pos);\n}\nfunction rebuildDynamicObstacleMap() {\n    if (!dynamicObstacleSystem || !webgl)\n        return;\n    obstacleMaps[\"dynamic\"] = new obstacle_map_1.default(webgl, obstacleSize, obstacleSize);\n    var obstacles = dynamicObstacleSystem.getObstacles();\n    obstacles.forEach(function (obstacle) {\n        obstacleMaps[\"dynamic\"].addObstacle(obstacle.size, obstacle.pos);\n    });\n    console.log(\"\\uD83D\\uDD04 \\u91CD\\u5EFA\\u52D5\\u614B\\u969C\\u7919\\u7269\\u5730\\u5716\\uFF0C\\u5305\\u542B \".concat(obstacles.length, \" \\u500B\\u969C\\u7919\\u7269\"));\n}\nfunction moveObstacle(dx, dy) {\n    obstaclePosition[0] += dx;\n    obstaclePosition[1] += dy;\n    obstaclePosition[0] = Math.max(0.02, Math.min(0.98, obstaclePosition[0]));\n    obstaclePosition[1] = Math.max(0.02, Math.min(0.98, obstaclePosition[1]));\n    rebuildObstacleMapOne(obstacleMaps, webgl, obstacleSize, obstaclePosition);\n}\nfunction setupObstacleControls() {\n    document.addEventListener('keydown', function (event) {\n        var moveStep = 0.01;\n        switch (event.key) {\n            case 'ArrowLeft':\n            case 'a':\n            case 'A':\n                moveObstacle(-moveStep, 0);\n                break;\n            case 'ArrowRight':\n            case 'd':\n            case 'D':\n                moveObstacle(moveStep, 0);\n                break;\n            case 'ArrowUp':\n            case 'w':\n            case 'W':\n                moveObstacle(0, moveStep);\n                break;\n            case 'ArrowDown':\n            case 's':\n            case 'S':\n                moveObstacle(0, -moveStep);\n                break;\n        }\n    });\n    var moveStep = 0.01;\n    var leftButton = document.getElementById(\"move-obstacle-left\");\n    var rightButton = document.getElementById(\"move-obstacle-right\");\n    var upButton = document.getElementById(\"move-obstacle-up\");\n    var downButton = document.getElementById(\"move-obstacle-down\");\n    if (leftButton)\n        leftButton.onclick = function () { return moveObstacle(-moveStep, 0); };\n    if (rightButton)\n        rightButton.onclick = function () { return moveObstacle(moveStep, 0); };\n    if (upButton)\n        upButton.onclick = function () { return moveObstacle(0, -moveStep); };\n    if (downButton)\n        downButton.onclick = function () { return moveObstacle(0, moveStep); };\n}\nmain();\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MousePointRenderer = void 0;\nvar MousePointRenderer = (function () {\n    function MousePointRenderer(targetCanvas) {\n        var _this = this;\n        this.points = [];\n        this.visible = true;\n        this.canvas = targetCanvas;\n        this.overlayCanvas = document.createElement('canvas');\n        this.overlayCanvas.style.position = 'absolute';\n        this.overlayCanvas.style.top = '0';\n        this.overlayCanvas.style.left = '0';\n        this.overlayCanvas.style.pointerEvents = 'none';\n        this.overlayCanvas.style.zIndex = '10';\n        this.updateCanvasSize();\n        if (this.canvas.parentElement) {\n            this.canvas.parentElement.appendChild(this.overlayCanvas);\n            if (getComputedStyle(this.canvas.parentElement).position === 'static') {\n                this.canvas.parentElement.style.position = 'relative';\n            }\n        }\n        this.overlayCtx = this.overlayCanvas.getContext('2d');\n        var resizeObserver = new ResizeObserver(function () {\n            _this.updateCanvasSize();\n        });\n        resizeObserver.observe(this.canvas);\n    }\n    MousePointRenderer.prototype.updateCanvasSize = function () {\n        var rect = this.canvas.getBoundingClientRect();\n        this.overlayCanvas.width = rect.width;\n        this.overlayCanvas.height = rect.height;\n        this.overlayCanvas.style.width = rect.width + 'px';\n        this.overlayCanvas.style.height = rect.height + 'px';\n    };\n    MousePointRenderer.prototype.updatePoints = function (points) {\n        this.points = points;\n        this.render();\n    };\n    MousePointRenderer.prototype.setVisible = function (visible) {\n        this.visible = visible;\n        this.overlayCanvas.style.display = visible ? 'block' : 'none';\n        if (visible) {\n            this.render();\n        }\n        else {\n            this.overlayCtx.clearRect(0, 0, this.overlayCanvas.width, this.overlayCanvas.height);\n        }\n    };\n    MousePointRenderer.prototype.isVisible = function () {\n        return this.visible;\n    };\n    MousePointRenderer.prototype.render = function () {\n        var _this = this;\n        this.overlayCtx.clearRect(0, 0, this.overlayCanvas.width, this.overlayCanvas.height);\n        if (this.points.length === 0 || !this.visible)\n            return;\n        var canvasWidth = this.overlayCanvas.width;\n        var canvasHeight = this.overlayCanvas.height;\n        this.points.forEach(function (point, index) {\n            var x = point.pos[0] * canvasWidth;\n            var y = (1.0 - point.pos[1]) * canvasHeight;\n            var hue = (index * 137.5) % 360;\n            var color = \"hsl(\".concat(hue, \", 70%, 60%)\");\n            _this.drawPoint(x, y, color, index);\n            if (point.movement[0] !== 0 || point.movement[1] !== 0) {\n                _this.drawMovement(x, y, point.movement, color, canvasWidth, canvasHeight);\n            }\n        });\n    };\n    MousePointRenderer.prototype.drawPoint = function (x, y, color, index) {\n        var ctx = this.overlayCtx;\n        ctx.beginPath();\n        ctx.arc(x, y, 12, 0, 2 * Math.PI);\n        ctx.fillStyle = color;\n        ctx.globalAlpha = 0.7;\n        ctx.fill();\n        ctx.beginPath();\n        ctx.arc(x, y, 8, 0, 2 * Math.PI);\n        ctx.fillStyle = 'white';\n        ctx.globalAlpha = 0.9;\n        ctx.fill();\n        ctx.fillStyle = 'black';\n        ctx.globalAlpha = 1.0;\n        ctx.font = '12px Arial';\n        ctx.textAlign = 'center';\n        ctx.textBaseline = 'middle';\n        ctx.fillText((index + 1).toString(), x, y);\n        ctx.globalAlpha = 1.0;\n    };\n    MousePointRenderer.prototype.drawMovement = function (x, y, movement, color, canvasWidth, canvasHeight) {\n        var ctx = this.overlayCtx;\n        var moveX = movement[0] * canvasWidth * 100;\n        var moveY = movement[1] * canvasHeight * 100;\n        var magnitude = Math.sqrt(moveX * moveX + moveY * moveY);\n        if (magnitude < 5)\n            return;\n        var endX = x + moveX;\n        var endY = y + moveY;\n        ctx.beginPath();\n        ctx.moveTo(x, y);\n        ctx.lineTo(endX, endY);\n        ctx.strokeStyle = color;\n        ctx.lineWidth = 2;\n        ctx.globalAlpha = 0.8;\n        ctx.stroke();\n        var angle = Math.atan2(moveY, moveX);\n        var headLength = Math.min(15, magnitude * 0.3);\n        ctx.beginPath();\n        ctx.moveTo(endX, endY);\n        ctx.lineTo(endX - headLength * Math.cos(angle - Math.PI / 6), endY - headLength * Math.sin(angle - Math.PI / 6));\n        ctx.moveTo(endX, endY);\n        ctx.lineTo(endX - headLength * Math.cos(angle + Math.PI / 6), endY - headLength * Math.sin(angle + Math.PI / 6));\n        ctx.stroke();\n        ctx.globalAlpha = 1.0;\n    };\n    MousePointRenderer.prototype.destroy = function () {\n        if (this.overlayCanvas.parentElement) {\n            this.overlayCanvas.parentElement.removeChild(this.overlayCanvas);\n        }\n    };\n    return MousePointRenderer;\n}());\nexports.MousePointRenderer = MousePointRenderer;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar gl_resource_1 = __importDefault(require(\"./gl-utils/gl-resource\"));\nvar fbo_1 = __importDefault(require(\"./gl-utils/fbo\"));\nvar ObstacleMapShaders = __importStar(require(\"./shaders/obstacle-map-shaders\"));\nvar ObstacleMap = (function (_super) {\n    __extends(ObstacleMap, _super);\n    function ObstacleMap(gl, width, height) {\n        var _this = _super.call(this, gl) || this;\n        _this._width = width;\n        _this._height = height;\n        _this._fbo = new fbo_1.default(gl, width, height);\n        _this._drawShader = ObstacleMapShaders.buildDrawShader(gl);\n        _this._addShader = ObstacleMapShaders.buildAddShader(gl);\n        _this.initObstaclesMap();\n        return _this;\n    }\n    ObstacleMap.prototype.freeGLResources = function () {\n        var gl = _super.prototype.gl.call(this);\n        this._fbo.freeGLResources();\n        this._fbo = null;\n        gl.deleteTexture(this._texture);\n        gl.deleteTexture(this._initTexture);\n        this._drawShader.freeGLResources();\n        this._addShader.freeGLResources();\n        this._drawShader = null;\n        this._addShader = null;\n    };\n    Object.defineProperty(ObstacleMap.prototype, \"texture\", {\n        get: function () {\n            return this._texture;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ObstacleMap.prototype.draw = function () {\n        var gl = _super.prototype.gl.call(this);\n        var drawShader = this._drawShader;\n        drawShader.u[\"uObstacles\"].value = this.texture;\n        drawShader.use();\n        drawShader.bindUniformsAndAttributes();\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n    };\n    ObstacleMap.prototype.addObstacle = function (pos, size) {\n        var gl = _super.prototype.gl.call(this);\n        var addShader = this._addShader;\n        addShader.u[\"uSize\"].value = pos;\n        addShader.u[\"uPos\"].value = size;\n        this._fbo.bind([this._texture]);\n        addShader.use();\n        addShader.bindUniformsAndAttributes();\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n    };\n    ObstacleMap.prototype.initObstaclesMap = function () {\n        var gl = _super.prototype.gl.call(this);\n        var width = this._width;\n        var height = this._height;\n        var texels = [];\n        for (var iY = 0; iY < height; ++iY) {\n            for (var iX = 0; iX < width; ++iX) {\n                if (iY === 0) {\n                    texels.push.apply(texels, [127, 255, 0, 255]);\n                }\n                else if (iY === height - 1) {\n                    texels.push.apply(texels, [127, 0, 0, 255]);\n                }\n                else if (iX === 0) {\n                    texels.push.apply(texels, [255, 127, 0, 255]);\n                }\n                else if (iX === width - 1) {\n                    texels.push.apply(texels, [0, 127, 0, 255]);\n                }\n                else {\n                    texels.push.apply(texels, [127, 127, 0, 255]);\n                }\n            }\n        }\n        var data = new Uint8Array(texels);\n        var textures = [];\n        for (var i = 0; i < 2; ++i) {\n            var tex = gl.createTexture();\n            gl.bindTexture(gl.TEXTURE_2D, tex);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, data);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n            textures.push(tex);\n        }\n        gl.bindTexture(gl.TEXTURE_2D, null);\n        this._texture = textures[0];\n        this._initTexture = textures[1];\n    };\n    return ObstacleMap;\n}(gl_resource_1.default));\nexports.default = ObstacleMap;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.collision = exports.fluid = exports.obstacles = exports.display = exports.brush = exports.bind = exports.mouse = void 0;\nvar Requirements = __importStar(require(\"./requirements\"));\nrequire(\"./page-interface-generated\");\nvar Mouse = (function () {\n    function Mouse() {\n        var _this = this;\n        this._posInPx = [0, 0];\n        this._pivotInPx = [0, 0];\n        this.setPosInPx([0, 0]);\n        this.setMovementInPx([0, 0]);\n        Page.Canvas.Observers.mouseMove.push(function (relX, relY) {\n            var canvasSize = Page.Canvas.getSize();\n            _this.setPosInPx([canvasSize[0] * relX, canvasSize[1] * (1 - relY)]);\n        });\n        Page.Canvas.Observers.mouseDown.push(function () {\n            _this.setMovementInPx([0, 0]);\n            _this._pivotInPx = _this._posInPx;\n        });\n    }\n    Object.defineProperty(Mouse.prototype, \"posInPx\", {\n        get: function () {\n            return this._posInPx;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Mouse.prototype, \"pos\", {\n        get: function () {\n            return this._pos;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Mouse.prototype, \"movementInPx\", {\n        get: function () {\n            return this._movementInPx;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Mouse.prototype, \"movement\", {\n        get: function () {\n            return this._movement;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Mouse.prototype.setPosInPx = function (pos) {\n        var toPivot = [\n            this._pivotInPx[0] - pos[0],\n            this._pivotInPx[1] - pos[1]\n        ];\n        var distToPivot = Math.sqrt(toPivot[0] * toPivot[0] + toPivot[1] * toPivot[1]);\n        var maxDist = 16;\n        if (distToPivot > maxDist) {\n            toPivot[0] *= maxDist / distToPivot;\n            toPivot[1] *= maxDist / distToPivot;\n            this._pivotInPx[0] = pos[0] + toPivot[0];\n            this._pivotInPx[1] = pos[1] + toPivot[1];\n        }\n        var movementInPx = [-toPivot[0] / maxDist, -toPivot[1] / maxDist];\n        this.setMovementInPx(movementInPx);\n        this._posInPx = pos;\n        this._pos = this.setRelative(pos);\n    };\n    Mouse.prototype.setMovementInPx = function (movement) {\n        this._movementInPx = movement;\n        this._movement = this.setRelative(movement);\n    };\n    Mouse.prototype.setRelative = function (pos) {\n        var canvasSize = Page.Canvas.getSize();\n        return [\n            pos[0] / canvasSize[0],\n            pos[1] / canvasSize[1],\n        ];\n    };\n    return Mouse;\n}());\nvar mouse = new Mouse();\nexports.mouse = mouse;\nfunction bindMouse() {\n    exports.mouse = mouse = new Mouse();\n}\nvar brushInfo = {\n    radius: 10,\n    strength: 100,\n};\nexports.brush = brushInfo;\nvar fluidInfo = {\n    stream: true,\n};\nexports.fluid = fluidInfo;\nvar ObstaclesInfo;\n(function (ObstaclesInfo) {\n    ObstaclesInfo[\"NONE\"] = \"none\";\n    ObstaclesInfo[\"ONE\"] = \"one\";\n    ObstaclesInfo[\"MANY\"] = \"many\";\n    ObstaclesInfo[\"DYNAMIC\"] = \"dynamic\";\n})(ObstaclesInfo || (ObstaclesInfo = {}));\nvar obstaclesInfo = ObstaclesInfo.NONE;\nexports.obstacles = obstaclesInfo;\nvar displayInfo = {\n    velocity: true,\n    pressure: true,\n    brush: false,\n    obstacles: true,\n    mousePoints: true,\n    warmColors: false,\n};\nexports.display = displayInfo;\nvar collisionInfo = {\n    speed: 0.1,\n};\nexports.collision = collisionInfo;\nfunction bindControls(fluid) {\n    {\n        var RESOLUTIONS_CONTROL_ID = \"resolution\";\n        var updateResolution = function (values) {\n            var resolutionValue = values[0];\n            var width, height;\n            if (resolutionValue.includes('x')) {\n                var _a = resolutionValue.split('x'), w = _a[0], h = _a[1];\n                width = +w;\n                height = +h;\n            }\n            else {\n                width = height = +resolutionValue;\n            }\n            console.log(\"\\uD83D\\uDD27 \\u8A2D\\u5B9A\\u89E3\\u6790\\u5EA6: \".concat(width, \"\\u00D7\").concat(height));\n            fluid.reset(width, height);\n        };\n        Page.Tabs.addObserver(RESOLUTIONS_CONTROL_ID, updateResolution);\n        updateResolution(Page.Tabs.getValues(RESOLUTIONS_CONTROL_ID));\n    }\n    {\n        var FLOAT_CONTROL_ID = \"float-texture-checkbox-id\";\n        if (!Requirements.allExtensionsLoaded) {\n            Page.Controls.setVisibility(FLOAT_CONTROL_ID, false);\n            Page.Checkbox.setChecked(FLOAT_CONTROL_ID, false);\n        }\n        var updateFloat = function (use) { fluid.useFloatTextures = use; };\n        Page.Checkbox.addObserver(FLOAT_CONTROL_ID, updateFloat);\n        updateFloat(Page.Checkbox.isChecked(FLOAT_CONTROL_ID));\n    }\n    {\n        var ITERATIONS_CONTROL_ID = \"solver-steps-range-id\";\n        var updateIterations = function (iterations) { fluid.minNbIterations = iterations; };\n        Page.Range.addObserver(ITERATIONS_CONTROL_ID, updateIterations);\n        updateIterations(Page.Range.getValue(ITERATIONS_CONTROL_ID));\n    }\n    {\n        var TIMESTEP_CONTROL_ID = \"timestep-range-id\";\n        var updateTimestep = function (timestep) { fluid.timestep = timestep; };\n        Page.Range.addObserver(TIMESTEP_CONTROL_ID, updateTimestep);\n        updateTimestep(Page.Range.getValue(TIMESTEP_CONTROL_ID));\n    }\n    {\n        var STREAM_CONTROL_ID = \"stream-checkbox-id\";\n        var updateStream = function (doStream) { fluidInfo.stream = doStream; };\n        Page.Checkbox.addObserver(STREAM_CONTROL_ID, updateStream);\n        updateStream(Page.Checkbox.isChecked(STREAM_CONTROL_ID));\n    }\n    {\n        var OBSTACLES_CONTROL_ID = \"obstacles\";\n        var updateObstacles = function (values) {\n            exports.obstacles = obstaclesInfo = values[0];\n            if (obstaclesInfo === ObstaclesInfo.DYNAMIC) {\n                if (window.dynamicObstacleSystem) {\n                    window.dynamicObstacleSystem.reset();\n                    console.log(\" \");\n                }\n            }\n        };\n        Page.Tabs.addObserver(OBSTACLES_CONTROL_ID, updateObstacles);\n        updateObstacles(Page.Tabs.getValues(OBSTACLES_CONTROL_ID));\n    }\n    {\n        var BRUSH_RADIUS_CONTROL_ID_1 = \"brush-radius-range-id\";\n        var updateBrushRadius_1 = function (radius) { brushInfo.radius = radius; };\n        Page.Range.addObserver(BRUSH_RADIUS_CONTROL_ID_1, updateBrushRadius_1);\n        updateBrushRadius_1(Page.Range.getValue(BRUSH_RADIUS_CONTROL_ID_1));\n        Page.Canvas.Observers.mouseWheel.push(function (delta) {\n            Page.Range.setValue(BRUSH_RADIUS_CONTROL_ID_1, brushInfo.radius + 5 * delta);\n            updateBrushRadius_1(Page.Range.getValue(BRUSH_RADIUS_CONTROL_ID_1));\n        });\n    }\n    {\n        var BRUSH_STRENGTH_CONTROL_ID = \"brush-strength-range-id\";\n        var updateBrushStrength = function (strength) { brushInfo.strength = strength; };\n        Page.Range.addObserver(BRUSH_STRENGTH_CONTROL_ID, updateBrushStrength);\n        updateBrushStrength(Page.Range.getValue(BRUSH_STRENGTH_CONTROL_ID));\n    }\n    {\n        var DISPLAY_MODE_CONTROL_ID = \"displayed-fields\";\n        var updateDisplayMode = function (modes) {\n            displayInfo.velocity = modes[0] === \"velocity\" || modes[1] === \"velocity\";\n            displayInfo.pressure = modes[0] === \"pressure\" || modes[1] === \"pressure\";\n        };\n        Page.Tabs.addObserver(DISPLAY_MODE_CONTROL_ID, updateDisplayMode);\n        updateDisplayMode(Page.Tabs.getValues(DISPLAY_MODE_CONTROL_ID));\n    }\n    {\n        var COLOR_INTENSITY_CONTROL_ID = \"intensity-range-id\";\n        var updateColorIntensity = function (intensity) { fluid.colorIntensity = intensity; };\n        Page.Range.addObserver(COLOR_INTENSITY_CONTROL_ID, updateColorIntensity);\n        updateColorIntensity(Page.Range.getValue(COLOR_INTENSITY_CONTROL_ID));\n    }\n    {\n        var DISPLAY_COLOR_CONTROL_ID = \"display-color-checkbox-id\";\n        var updateColor = function (display) { fluid.color = display; };\n        Page.Checkbox.addObserver(DISPLAY_COLOR_CONTROL_ID, updateColor);\n        updateColor(Page.Checkbox.isChecked(DISPLAY_COLOR_CONTROL_ID));\n    }\n    {\n        var DISPLAY_OBSTACLES_CONTROL_ID = \"display-obstacles-checkbox-id\";\n        var updateDisplayObstacles = function (display) { displayInfo.obstacles = display; };\n        Page.Checkbox.addObserver(DISPLAY_OBSTACLES_CONTROL_ID, updateDisplayObstacles);\n        updateDisplayObstacles(Page.Checkbox.isChecked(DISPLAY_OBSTACLES_CONTROL_ID));\n    }\n    {\n        var DISPLAY_MOUSE_POINTS_CONTROL_ID = \"display-mouse-points-checkbox-id\";\n        var updateDisplayMousePoints = function (display) { displayInfo.mousePoints = display; };\n        Page.Checkbox.addObserver(DISPLAY_MOUSE_POINTS_CONTROL_ID, updateDisplayMousePoints);\n        updateDisplayMousePoints(Page.Checkbox.isChecked(DISPLAY_MOUSE_POINTS_CONTROL_ID));\n    }\n    {\n        var DISPLAY_WARM_COLORS_CONTROL_ID = \"display-warm-colors-checkbox-id\";\n        var updateDisplayWarmColors = function (display) {\n            displayInfo.warmColors = display;\n            fluid.warmColors = display;\n        };\n        Page.Checkbox.addObserver(DISPLAY_WARM_COLORS_CONTROL_ID, updateDisplayWarmColors);\n        updateDisplayWarmColors(Page.Checkbox.isChecked(DISPLAY_WARM_COLORS_CONTROL_ID));\n    }\n    {\n        var COLLISION_SPEED_CONTROL_ID = \"collision-speed-range-id\";\n        var updateCollisionSpeed = function (speed) { collisionInfo.speed = speed; };\n        Page.Range.addObserver(COLLISION_SPEED_CONTROL_ID, updateCollisionSpeed);\n        updateCollisionSpeed(Page.Range.getValue(COLLISION_SPEED_CONTROL_ID));\n    }\n}\nfunction bind(fluid) {\n    bindControls(fluid);\n    bindMouse();\n}\nexports.bind = bind;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.allExtensionsLoaded = exports.loadExtensions = exports.check = void 0;\nrequire(\"./page-interface-generated\");\nfunction check(gl) {\n    function setError(message) {\n        Page.Demopage.setErrorMessage(\"webgl-requirements\", message);\n    }\n    var mediump = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT);\n    if (mediump.precision < 23) {\n        Page.Demopage.setErrorMessage(\"webgl-requirements\", \"Your device only supports low precision float in fragment shader.\\n\" +\n            \"The simulation will not run.\");\n        return false;\n    }\n    return true;\n}\nexports.check = check;\nvar allExtensionsLoaded = false;\nexports.allExtensionsLoaded = allExtensionsLoaded;\nfunction loadExtensions(gl, extensions) {\n    exports.allExtensionsLoaded = allExtensionsLoaded = true;\n    var i = 0;\n    for (var _i = 0, extensions_1 = extensions; _i < extensions_1.length; _i++) {\n        var ext = extensions_1[_i];\n        if (!gl.getExtension(ext)) {\n            Page.Demopage.setErrorMessage(\"no-ext\" + i, \"Cannot load WebGL extension '\" + ext + \"'.\");\n            exports.allExtensionsLoaded = allExtensionsLoaded = false;\n        }\n        ++i;\n    }\n}\nexports.loadExtensions = loadExtensions;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.buildDrawShader = void 0;\nvar shader_1 = __importDefault(require(\"../gl-utils/shader\"));\nvar vbo_1 = __importDefault(require(\"../gl-utils/vbo\"));\nvar build_shaders_1 = require(\"./build-shaders\");\nvar drawVert = \"uniform vec2 uBrushSize; //relative, in [0,1]x[0,1]\\nuniform vec2 uBrushPos; //relative, in [0,1]x[0,1]\\n\\nattribute vec2 aCorner; //in {-1,+1}x{-1,+1}\\n\\nvarying vec2 toCenter;\\n\\nvoid main(void) {\\n    toCenter = -aCorner;\\n\\n    vec2 pos = uBrushPos + aCorner * uBrushSize;\\n\\n    gl_Position = vec4(2.0 * pos - 1.0, 0, 1);\\n}\";\nvar drawFrag = \"precision mediump float;\\n\\nuniform float uThickness; //relative to brushRadius\\n\\nvarying vec2 toCenter;\\n\\nvoid main(void) {\\n    float dist = length(toCenter);\\n    if (dist < 1.0-uThickness || dist > 1.0)\\n        discard;\\n\\n    const vec3 color = vec3(1);\\n\\n    gl_FragColor = vec4(color, 1.0);\\n}\";\nvar drawSrc = new build_shaders_1.ShaderSrc(drawVert, drawFrag);\nfunction buildDrawShader(gl) {\n    var shader = new shader_1.default(gl, drawSrc.vert, drawSrc.frag);\n    shader.a[\"aCorner\"].VBO = vbo_1.default.createQuad(gl, -1, -1, +1, +1);\n    return shader;\n}\nexports.buildDrawShader = buildDrawShader;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ShaderSrc = exports.fetch = void 0;\nfunction fetch(filepath) {\n    var request = new XMLHttpRequest();\n    request.open('GET', filepath, false);\n    request.send();\n    return request.responseText;\n}\nexports.fetch = fetch;\n;\nvar ShaderSrc = (function () {\n    function ShaderSrc(vert, frag) {\n        this.vert = vert;\n        this.frag = frag;\n    }\n    ShaderSrc.prototype.batchReplace = function (includes) {\n        for (var _i = 0, includes_1 = includes; _i < includes_1.length; _i++) {\n            var include = includes_1[_i];\n            this.vert = this.vert.replace(new RegExp(include.toReplace), include.replacement);\n            this.frag = this.frag.replace(new RegExp(include.toReplace), include.replacement);\n        }\n    };\n    ShaderSrc.fromScript = function (vertId, fragId) {\n        var vert = document.getElementById(vertId).text;\n        var frag = document.getElementById(fragId).text;\n        return new ShaderSrc(vert, frag);\n    };\n    return ShaderSrc;\n}());\nexports.ShaderSrc = ShaderSrc;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.setUseFloatTextures = exports.buildObstaclesVelocityShader = exports.buildSubstractGradientShader = exports.buildDivergenceShader = exports.buildJacobiPressureShader = exports.buildAdvectShader = exports.buildAddVelShader = exports.buildDrawPressureShader = exports.buildDrawVelocityShader = void 0;\nvar shader_1 = __importDefault(require(\"../gl-utils/shader\"));\nvar vbo_1 = __importDefault(require(\"../gl-utils/vbo\"));\nvar build_shaders_1 = require(\"./build-shaders\");\nvar obstacle_map_shaders_1 = require(\"./obstacle-map-shaders\");\nvar rawEncodingStr = \"const float MAX_SPEED = 1.0;\\nconst float SPEED_BANDWIDTH = 2.01 * MAX_SPEED;\\n\\nconst float MIN_DIVERGENCE = -4.0 * MAX_SPEED;\\nconst float MAX_DIVERGENCE =  4.0 * MAX_SPEED;\\nconst float DIVERGENCE_BANDWIDTH = MAX_DIVERGENCE - MIN_DIVERGENCE;\\n\\nconst float MIN_PRESSURE = 0.5 * MIN_DIVERGENCE;\\nconst float MAX_PRESSURE = 0.5 * MAX_DIVERGENCE;\\nconst float PRESSURE_BANDWIDTH = MAX_PRESSURE - MIN_PRESSURE;\\n\\n/* Decodes a float value (32 bits in [0,1])\\n * from a 4D value (4x8bits in [0,1]x[0,1]x[0,1]x[0,1]) */\\nfloat decode32bit(vec4 v)\\n{\\n    const vec4 weights = 255.0 * vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0) / (256.0*256.0*256.0*256.0 - 1.0);\\n    return dot(weights, v);\\n}\\n\\n/* Encodes a float value (32 bits in [0,1])\\n * into a 4D value (4x8bits in [0,1]x[0,1]x[0,1]x[0,1]) */\\nvec4 encode32bit(float f)\\n{\\n    const vec4 base = (256.0*256.0*256.0*256.0 - 1.0) / vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\\n    return floor(mod(f * base, 256.0)) / 255.0;\\n}\\n\\n/* Decodes a float value (16 bits in [0,1])\\n * from a 2D value (2x8bits in [0,1]x[0,1]) */\\nfloat decode16bit(vec2 v)\\n{\\n    const vec2 weights = 255.0 * vec2(256.0, 1.0) / (256.0*256.0 - 1.0);\\n    return dot(weights, v);\\n}\\n\\n/* Encodes a float value (16 bits in [0,1])\\n * into a 2D value (2x8bits in [0,1]x[0,1]) */\\nvec2 encode16bit(float f)\\n{\\n    const vec2 base = (256.0*256.0 - 1.0) / vec2(256.0, 1.0);\\n    return floor(mod(f * base, 256.0)) / 255.0;\\n}\\n\\nfloat decodeDivergence(vec4 texel) {\\n    float div = decode32bit(texel);\\n    return div * DIVERGENCE_BANDWIDTH + MIN_DIVERGENCE;\\n}\\nvec4 encodeDivergence(float div) {\\n    div = (div - MIN_DIVERGENCE) / DIVERGENCE_BANDWIDTH;\\n    return encode32bit(div);\\n}\\n\\nfloat decodePressure(vec4 texel) {\\n    float p = decode32bit(texel);\\n    return p * PRESSURE_BANDWIDTH + MIN_PRESSURE;\\n}\\nvec4 encodePressure(float p) {\\n    p = (p - MIN_PRESSURE) / PRESSURE_BANDWIDTH;\\n    return encode32bit(p);\\n}\\n\\n___ENCODING_VELOCITY___\\n\\n___ENCODING_OBSTACLES___\";\nvar encodingVelocityFloatStr = \"vec4 encodeVelocity(vec2 vel) {\\n    return vec4(vel, 0, 0);\\n}\\nvec2 decodeVelocity(vec4 texel) {\\n    return texel.rg;\\n}\";\nvar encodingVelocityNoFloatStr = \"vec4 encodeVelocity(vec2 vel) {\\n    vel = 0.5 * (vel / MAX_SPEED + 1.0);\\n    return vec4(encode16bit(vel.x), encode16bit(vel.y));\\n}\\nvec2 decodeVelocity(vec4 texel) {\\n    vec2 vel = vec2(decode16bit(texel.rg), decode16bit(texel.ba));\\n    return (2.0 * vel - 1.0) * MAX_SPEED;\\n}\";\nvar addVelVert = \"uniform vec2 uBrushSize; //relative, in [0,1]x[0,1]\\nuniform vec2 uBrushPos; //relative, in [0,1]x[0,1]\\n\\nattribute vec2 aCorner; //{0,1}x{0,1}\\n\\nvarying vec2 sampleCoords;\\nvarying vec2 toBrush;\\n\\nvoid main(void) {\\n    sampleCoords = aCorner;\\n    toBrush = (uBrushPos - aCorner) / uBrushSize;\\n\\n    gl_Position = vec4(2.0*aCorner - 1.0, 0.0, 1.0);\\n}\";\nvar addVelFrag = \"precision mediump float;\\n\\nuniform sampler2D uVel;\\n\\nuniform vec2 uAddVel;\\n\\nvarying vec2 sampleCoords;\\nvarying vec2 toBrush;\\n\\n___ENCODING___\\n\\nvoid main(void) {\\n    vec2 vel = decodeVelocity(texture2D(uVel, sampleCoords));\\n\\n    float influence = 1.0 - clamp(length(toBrush), 0.0, 1.0);\\n    vec2 toAdd = influence * uAddVel;\\n\\n    vel += toAdd;\\n    vel *= min(1.0, MAX_SPEED / length(vel));\\n\\n    gl_FragColor = encodeVelocity(vel);\\n}\";\nvar fullscreenVert = \"attribute vec2 aCorner; //{0,1}x{0,1}\\n\\nvarying vec2 sampleCoords;\\n\\nvoid main(void) {\\n    sampleCoords = aCorner;\\n    gl_Position = vec4(2.0*aCorner - 1.0, 0.0, 1.0);\\n}\";\nvar advectFrag = \"precision mediump float;\\n\\nuniform sampler2D uQuantity; //thing to advect\\nuniform sampler2D uVel;\\n\\nuniform vec2 uVelUnit;\\nuniform float uDt;\\n\\nvarying vec2 sampleCoords;\\n\\n___ENCODING___\\n\\nvoid main(void) {\\n    vec2 vel = decodeVelocity(texture2D(uVel, sampleCoords));\\n    vec2 pos = sampleCoords - uDt * vel * uVelUnit;\\n    gl_FragColor = texture2D(uQuantity, pos);\\n}\";\nvar jacobiPressureFrag = \"precision mediump float;\\n\\nuniform sampler2D uPrevIter; //x\\nuniform sampler2D uConstantTerm; //b\\nuniform sampler2D uObstacles;\\n\\nuniform float uAlpha;\\nuniform float uInvBeta;\\n\\nuniform vec2 uTexelSize;\\n\\nvarying vec2 sampleCoords;\\n\\n___ENCODING___\\n\\nvoid main(void) {\\n    vec2 obstacle = decodeObstacle(texture2D(uObstacles, sampleCoords));\\n    vec2 coords = sampleCoords + uTexelSize * obstacle;\\n\\n    float result = decodePressure(texture2D(uPrevIter, coords - vec2(uTexelSize.x,0))) +\\n                   decodePressure(texture2D(uPrevIter, coords + vec2(uTexelSize.x,0))) +\\n                   decodePressure(texture2D(uPrevIter, coords - vec2(0,uTexelSize.y))) +\\n                   decodePressure(texture2D(uPrevIter, coords + vec2(0,uTexelSize.y)));\\n\\n    result += uAlpha * decodeDivergence(texture2D(uConstantTerm, coords));\\n    result *= uInvBeta;\\n    result = clamp(result, MIN_PRESSURE, MAX_PRESSURE);\\n\\n    gl_FragColor = encodePressure(result);\\n}\";\nvar divergenceFrag = \"precision mediump float;\\n\\nuniform sampler2D uVelocity;\\n\\nuniform vec2 uTexelSize;\\n\\nvarying vec2 sampleCoords;\\n\\n___ENCODING___\\n\\nvoid main(void) {\\n    vec2 top =    decodeVelocity(texture2D(uVelocity, sampleCoords + vec2(0,uTexelSize.y)));\\n    vec2 bottom = decodeVelocity(texture2D(uVelocity, sampleCoords - vec2(0,uTexelSize.y)));\\n    vec2 left =   decodeVelocity(texture2D(uVelocity, sampleCoords - vec2(uTexelSize.x,0)));\\n    vec2 right =  decodeVelocity(texture2D(uVelocity, sampleCoords + vec2(uTexelSize.x,0)));\\n\\n    float div = ((right.x - left.x) + (top.y - bottom.y));\\n    div *= min(1.0, MAX_DIVERGENCE / length(div));\\n\\n    gl_FragColor = encodeDivergence(div);\\n}\";\nvar substractGradientFrag = \"precision mediump float;\\n\\nuniform sampler2D uVelocities;\\nuniform sampler2D uPressure;\\n\\nuniform vec2 uTexelSize;\\nuniform float uHalfInvDx;\\n\\nvarying vec2 sampleCoords;\\n\\n___ENCODING___\\n\\nvoid main(void) {\\n    float top =    decodePressure(texture2D(uPressure, sampleCoords + vec2(0,uTexelSize.y)));\\n    float bottom = decodePressure(texture2D(uPressure, sampleCoords - vec2(0,uTexelSize.y)));\\n    float left =   decodePressure(texture2D(uPressure, sampleCoords - vec2(uTexelSize.x,0)));\\n    float right =  decodePressure(texture2D(uPressure, sampleCoords + vec2(uTexelSize.x,0)));\\n\\n    vec2 grad = uHalfInvDx * vec2(right - left, top - bottom);\\n\\n    vec2 partialVel = decodeVelocity(texture2D(uVelocities, sampleCoords));\\n    vec2 divFreeVel = partialVel - grad;\\n    divFreeVel *= min(1.0, MAX_SPEED / length(divFreeVel));\\n\\n    gl_FragColor = encodeVelocity(divFreeVel);\\n}\";\nvar obstacleVelocityFrag = \"precision mediump float;\\n\\nuniform sampler2D uVelocities;\\nuniform sampler2D uObstacles;\\n\\nuniform vec2 uTexelSize;\\n\\nvarying vec2 sampleCoords;\\n\\n___ENCODING___\\n\\nvoid main(void) {\\n    vec2 obstacle = decodeObstacle(texture2D(uObstacles, sampleCoords));\\n    vec2 coords = sampleCoords + obstacle * uTexelSize;\\n\\n    vec2 vel = decodeVelocity(texture2D(uVelocities, coords));\\n    vel *= sign(0.5 - dot(obstacle,obstacle));\\n\\n    gl_FragColor = encodeVelocity(vel);\\n}\";\nvar drawVelocityFrag = \"precision mediump float;\\n\\nuniform sampler2D uVel;\\nuniform float uColorIntensity;\\nuniform bool uBlacknWhite;\\nuniform bool uWarmColors;\\n\\nvarying vec2 sampleCoords;\\n\\n___ENCODING___\\n\\n/*\\n   /---__/     __\\n 0 1 2 3 4\\n*/\\nfloat bump(float x) {\\n  return min(mix(0.0, 1.0, clamp(x, 0.0, 1.0)),\\n             mix(1.0, 0.0, clamp(x-3.0, 0.0, 1.0)));\\n}\\n\\n/* Every hue, periodic with a period of 1 */\\nvec3 color(float value) {\\n    value *= 6.0;\\n    float r = bump(mod(value-4.0, 6.0));\\n    float g = bump(mod(value-0.0, 6.0));\\n    float b = bump(mod(value-2.0, 6.0));\\n    return vec3(r,g,b);\\n}\\n\\n/* Warm colors only (yellow to red range) for lava effect */\\nvec3 warmColor(float value) {\\n    // Map to warm hues: yellow (0.17) to red (0.0/1.0)\\n    // Create a smooth transition from yellow through orange to red\\n    value = clamp(value, 0.0, 1.0);\\n    \\n    // Create a warm color palette\\n    float r = 1.0; // Always high red component\\n    float g = 1.0 - smoothstep(0.3, 1.0, value); // Yellow to orange transition\\n    float b = 0.0; // No blue for warm colors\\n    \\n    return vec3(r, g, b);\\n}\\n\\nvoid main(void) {\\n    vec2 vel = decodeVelocity(texture2D(uVel, sampleCoords)) / MAX_SPEED;\\n\\n    vec3 c;\\n    if (uWarmColors) {\\n        // Use velocity magnitude for warm colors instead of direction\\n        float magnitude = length(vel);\\n        c = warmColor(magnitude);\\n    } else {\\n        // Use direction-based coloring for full spectrum\\n        c = color(atan(vel.y, vel.x) / (2.0 * 3.14159));\\n    }\\n    \\n    c = mix(c, vec3(1), float(uBlacknWhite));\\n\\n    float intensity = smoothstep(0.0, 1.0, uColorIntensity*length(vel));\\n\\n    gl_FragColor = vec4(intensity * c, 1);\\n}\";\nvar drawPressureFrag = \"precision mediump float;\\n\\nuniform sampler2D uPressure;\\nuniform float uColorIntensity;\\nuniform bool uBlacknWhite;\\n\\nvarying vec2 sampleCoords;\\n\\n___ENCODING___\\n\\nvec3 color(float value) {\\n    value = smoothstep(0.0, 1.0, clamp(value, 0.0, 1.0));\\n    value = smoothstep(0.0, 1.0, value);\\n\\n    float r = smoothstep(.5, .75, value);\\n    float g = min(smoothstep(.0, .25, value),\\n                  1.0 - smoothstep(.75, 1.0, value));\\n    float b = 1.0 - smoothstep(.25, .5, value);\\n    return vec3(r,g,b);\\n}\\n\\nvoid main(void) {\\n    float pressure = decodePressure(texture2D(uPressure, sampleCoords));\\n    pressure = pressure / MAX_PRESSURE;\\n    pressure = clamp(256.0*uColorIntensity*pressure, -.5, .5) + 0.5;\\n\\n    vec3 c = color(pressure);\\n    c = mix(c, vec3(pressure), float(uBlacknWhite));\\n\\n    gl_FragColor = vec4(c, 1);\\n}\";\nvar encodingStr = rawEncodingStr;\nsetUseFloatTextures(false);\nfunction setUseFloatTextures(useFloat) {\n    var replace = (useFloat) ? encodingVelocityFloatStr : encodingVelocityNoFloatStr;\n    encodingStr = rawEncodingStr.replace(/___ENCODING_VELOCITY___/g, replace);\n    encodingStr = encodingStr.replace(/___ENCODING_OBSTACLES___/g, obstacle_map_shaders_1.encodingStr);\n}\nexports.setUseFloatTextures = setUseFloatTextures;\nvar drawVelocitySrc = new build_shaders_1.ShaderSrc(fullscreenVert, drawVelocityFrag);\nvar drawPressureSrc = new build_shaders_1.ShaderSrc(fullscreenVert, drawPressureFrag);\nvar addVelSrc = new build_shaders_1.ShaderSrc(addVelVert, addVelFrag);\nvar advectSrc = new build_shaders_1.ShaderSrc(fullscreenVert, advectFrag);\nvar jacobiPressureSrc = new build_shaders_1.ShaderSrc(fullscreenVert, jacobiPressureFrag);\nvar divergenceSrc = new build_shaders_1.ShaderSrc(fullscreenVert, divergenceFrag);\nvar substractGradientSrc = new build_shaders_1.ShaderSrc(fullscreenVert, substractGradientFrag);\nvar obstaclesVelocitySrc = new build_shaders_1.ShaderSrc(fullscreenVert, obstacleVelocityFrag);\nfunction buildFullscreenShader(gl, src) {\n    var vertSrc = src.vert;\n    var fragSrc = src.frag.replace(/___ENCODING___/g, encodingStr);\n    var shader = new shader_1.default(gl, vertSrc, fragSrc);\n    shader.a[\"aCorner\"].VBO = vbo_1.default.createQuad(gl, 0, 0, 1, 1);\n    return shader;\n}\nfunction buildDrawVelocityShader(gl) {\n    return buildFullscreenShader(gl, drawVelocitySrc);\n}\nexports.buildDrawVelocityShader = buildDrawVelocityShader;\nfunction buildDrawPressureShader(gl) {\n    return buildFullscreenShader(gl, drawPressureSrc);\n}\nexports.buildDrawPressureShader = buildDrawPressureShader;\nfunction buildAddVelShader(gl) {\n    return buildFullscreenShader(gl, addVelSrc);\n}\nexports.buildAddVelShader = buildAddVelShader;\nfunction buildAdvectShader(gl) {\n    return buildFullscreenShader(gl, advectSrc);\n}\nexports.buildAdvectShader = buildAdvectShader;\nfunction buildJacobiPressureShader(gl) {\n    return buildFullscreenShader(gl, jacobiPressureSrc);\n}\nexports.buildJacobiPressureShader = buildJacobiPressureShader;\nfunction buildDivergenceShader(gl) {\n    return buildFullscreenShader(gl, divergenceSrc);\n}\nexports.buildDivergenceShader = buildDivergenceShader;\nfunction buildSubstractGradientShader(gl) {\n    return buildFullscreenShader(gl, substractGradientSrc);\n}\nexports.buildSubstractGradientShader = buildSubstractGradientShader;\nfunction buildObstaclesVelocityShader(gl) {\n    return buildFullscreenShader(gl, obstaclesVelocitySrc);\n}\nexports.buildObstaclesVelocityShader = buildObstaclesVelocityShader;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.encodingStr = exports.buildAddShader = exports.buildDrawShader = void 0;\nvar shader_1 = __importDefault(require(\"../gl-utils/shader\"));\nvar vbo_1 = __importDefault(require(\"../gl-utils/vbo\"));\nvar build_shaders_1 = require(\"./build-shaders\");\nvar encodingStr = \"vec4 encodeObstacle(vec2 normal) {\\n  normal = clamp(normalize(normal), -1.0, 1.0);\\n  return vec4(0.5 * normal + 0.5, 0, 0);\\n}\\nvec2 decodeObstacle(vec4 texel) {\\n  return 2.0 * texel.rg - 1.0;\\n}\";\nexports.encodingStr = encodingStr;\nvar drawVert = \"attribute vec2 aCorner; //{0,1}x{0,1}\\n\\nvarying vec2 sampleCoords;\\n\\nvoid main(void) {\\n    sampleCoords = aCorner;\\n    gl_Position = vec4(2.0*aCorner - 1.0, 0.0, 1.0);\\n}\";\nvar drawFrag = \"precision mediump float;\\n\\nuniform sampler2D uObstacles;\\n\\nvarying vec2 sampleCoords;\\n\\n___ENCODING___\\n\\nvoid main(void) {\\n    vec2 obstacle = decodeObstacle(texture2D(uObstacles, sampleCoords));\\n    if (dot(obstacle, obstacle) < 0.5)\\n        discard;\\n\\n    gl_FragColor = vec4(0.5*obstacle + 0.5, 0, 0);\\n}\";\nvar addObstacleVert = \"uniform vec2 uSize; //relative, in [0,1]x[0,1]\\nuniform vec2 uPos; //relative, in [0,1]x[0,1]\\n\\nattribute vec2 aCorner; //in {-1,+1}x{-1,+1}\\n\\nvarying vec2 toCenter;\\n\\nvoid main(void) {\\n    toCenter = -aCorner;\\n\\n    vec2 pos = uPos + aCorner * uSize;\\n\\n    gl_Position = vec4(2.0 * pos - 1.0, 0, 1);\\n}\";\nvar addObstacleFrag = \"precision mediump float;\\n\\nvarying vec2 toCenter;\\n\\n___ENCODING___\\n\\nvoid main(void) {\\n    float dist = length(toCenter);\\n    if (dist > 1.0)\\n        discard;\\n\\n    vec2 normal = -toCenter / dist;\\n    gl_FragColor = encodeObstacle(normal);\\n}\";\nvar includes = [\n    { toReplace: \"___ENCODING___\", replacement: encodingStr },\n];\nvar drawSrc = new build_shaders_1.ShaderSrc(drawVert, drawFrag);\ndrawSrc.batchReplace(includes);\nvar addSrc = new build_shaders_1.ShaderSrc(addObstacleVert, addObstacleFrag);\naddSrc.batchReplace(includes);\nfunction buildDrawShader(gl) {\n    var shader = new shader_1.default(gl, drawSrc.vert, drawSrc.frag);\n    shader.a[\"aCorner\"].VBO = vbo_1.default.createQuad(gl, 0, 0, 1, 1);\n    return shader;\n}\nexports.buildDrawShader = buildDrawShader;\nfunction buildAddShader(gl) {\n    var shader = new shader_1.default(gl, addSrc.vert, addSrc.frag);\n    shader.a[\"aCorner\"].VBO = vbo_1.default.createQuad(gl, -1, -1, 1, 1);\n    return shader;\n}\nexports.buildAddShader = buildAddShader;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MultiMouseWS = void 0;\nvar MultiMouseWS = (function () {\n    function MultiMouseWS(url, onPointsUpdate, fps) {\n        if (fps === void 0) { fps = 10; }\n        this.url = url;\n        this.points = [];\n        this.onPointsUpdate = onPointsUpdate;\n        this.ws = null;\n        this.isConnected = false;\n        this.fps = fps;\n        this.sendInterval = null;\n    }\n    MultiMouseWS.prototype.connect = function () {\n        var _this = this;\n        this.ws = new WebSocket(this.url);\n        this.ws.onopen = function () {\n            console.log('WS connected');\n            _this.isConnected = true;\n            _this.startSendLoop();\n        };\n        this.ws.onclose = function () {\n            console.log('WS closed');\n            _this.isConnected = false;\n            _this.stopSendLoop();\n        };\n        this.ws.onerror = function (err) {\n            console.error('WS error', err);\n            _this.isConnected = false;\n        };\n        this.ws.onmessage = function (ev) {\n            var _a;\n            try {\n                var data = JSON.parse(ev.data);\n                if (Array.isArray(data)) {\n                    if (typeof ((_a = data[0]) === null || _a === void 0 ? void 0 : _a.pos) !== \"undefined\") {\n                        _this.points = data;\n                    }\n                    else {\n                        _this.points = data.map(function (_a) {\n                            var x = _a[0], y = _a[1];\n                            return ({ pos: [x, y], movement: [0, 0] });\n                        });\n                    }\n                    if (window.checkCollisionWithObstacles && _this.points.length > 0) {\n                        window.checkCollisionWithObstacles(_this.points);\n                    }\n                    if (_this.onPointsUpdate)\n                        _this.onPointsUpdate(_this.points);\n                }\n            }\n            catch (e) {\n                console.warn('Non-JSON message:', ev.data);\n            }\n        };\n    };\n    MultiMouseWS.prototype.startSendLoop = function () {\n        var _this = this;\n        var interval = 1000 / this.fps;\n        this.sendInterval = window.setInterval(function () {\n            if (_this.ws && _this.ws.readyState === WebSocket.OPEN) {\n                _this.ws.send('detect');\n            }\n        }, interval);\n    };\n    MultiMouseWS.prototype.stopSendLoop = function () {\n        if (this.sendInterval !== null) {\n            clearInterval(this.sendInterval);\n            this.sendInterval = null;\n        }\n    };\n    MultiMouseWS.prototype.disconnect = function () {\n        this.stopSendLoop();\n        if (this.ws) {\n            this.ws.close();\n            this.ws = null;\n        }\n        this.isConnected = false;\n    };\n    MultiMouseWS.prototype.setFPS = function (fps) {\n        this.fps = fps;\n        if (this.isConnected) {\n            this.stopSendLoop();\n            this.startSendLoop();\n        }\n    };\n    return MultiMouseWS;\n}());\nexports.MultiMouseWS = MultiMouseWS;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(633);\n"],"names":["extendStatics","__extends","this","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__createBinding","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","__importDefault","exports","gl_resource_1","Parameters","BrushShaders","Brush","_super","gl","_this","_drawShader","buildDrawShader","thickness","freeGLResources","draw","canvas","canvasSize","clientWidth","clientHeight","drawShader","use","brushSize","brush","radius","u","mouse","pos","bindUniformsAndAttributes","drawArrays","TRIANGLE_STRIP","default","DynamicObstacleSystem","obstacles","nextId","ws","initializeRandomObstacles","initWebSocket","i","Math","random","sizeVariation","size","obstacle","id","vel","mass","friction","restitution","push","console","log","concat","sendObstaclePositions","checkCollisionWithMousePoints","points","forEach","point","pointIndex","_a","x","y","obstacleIndex","distance","sqrt","pow","toFixed","handleCollision","_b","normalizedX","normalizedY","collisionSpeed","window","collision","speed","moveX","moveY","halfSizeX","halfSizeY","max","min","getObstacles","clear","reset","WebSocket","onopen","onerror","err","error","readyState","OPEN","positions","map","msg","JSON","stringify","send","fbo_1","FluidShaders","Fluid","width","height","_useFloatTextures","viscosity","colorIntensity","color","warmColors","_FBO","freeTextures","freeShaders","_velTextures","deleteTexture","_tmpTexture","_pressureTexture","_divergenceTexture","freeShader","shader","_drawVelocityShader","_drawPressureShader","_addVelShader","_advectShader","_jacobiPressureShader","_divergenceShader","_substractGradientShader","_obstaclesVelocityShader","_width","_height","dx","initTextures","buildShaders","_currIndex","set","bool","_nbIterations","ceil","currIndex","update","obstacleMap","dt","timestep","clearColor","multiPoints","multiMousePoints","_i","multiPoints_1","length","pt","movement","strength","addVel","advect","obstaclesVelocity","project","addVelShader","bind","nextIndex","switchBuffers","drawVelocity","drawPressure","drawPressureShader","obstacleVelocityShader","texture","texelSize","advectShader","computeDivergence","divergenceShader","COLOR_BUFFER_BIT","computePressure","jacobiPressureShader","alpha","dst","cstTerm","index","textures","bindAttributes","bindUniforms","substractPressureGradient","substractGradientShader","floatTexels","floatData","Float32Array","uintTexels","uintData","Uint8Array","velFormat","FLOAT","UNSIGNED_BYTE","velData","createTexture","bindTexture","TEXTURE_2D","texImage2D","RGBA","textures_1","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","setUseFloatTextures","buildDrawVelocityShader","buildDrawPressureShader","buildAddVelShader","buildAdvectShader","buildJacobiPressureShader","buildDivergenceShader","buildSubstractGradientShader","buildObstaclesVelocityShader","FBO","createFramebuffer","colorBuffers","depthBuffer","bindFramebuffer","FRAMEBUFFER","viewport","framebufferTexture2D","bindRenderbuffer","RENDERBUFFER","framebufferRenderbuffer","DEPTH_ATTACHMENT","bindDefault","drawingBufferWidth","drawingBufferHeight","deleteFramebuffer","GLResource","_gl","notImplemented","location","alert","types","str","binder","uniform2fv","uniform3fv","uniform4fv","uniform2iv","uniform3iv","uniform4iv","uniform1i","uniformMatrix2fv","uniformMatrix3fv","uniformMatrix4fv","unitNb","activeTexture","TEXTURE_CUBE_MAP","isArray","uniform1iv","uniform1fv","uniform1f","ShaderProgram","vertexSource","fragmentSource","createShader","type","source","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","uCount","aCount","vertexShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","introspection","getProgramInfoLog","deleteProgram","ACTIVE_UNIFORMS","uniform","getActiveUniform","name_1","name","loc","getUniformLocation","ACTIVE_ATTRIBUTES","a","attribute","getActiveAttrib","name_2","VBO","getAttribLocation","useProgram","currTextureUnitNb","uName","aName","resizeCanvas","hidpi","cssPixel","devicePixelRatio","floor","array","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","normalize","stride","offset","deleteBuffer","createQuad","minX","minY","maxX","maxY","enableVertexAttribArray","vertexAttribPointer","Utils","brush_1","obstacle_map_1","fluid_1","Requirements","webgl","ws_mouse_1","mouse_point_renderer_1","dynamic_obstacle_1","obstaclePosition","obstacleMaps","obstacleSize","dynamicObstacleSystem","mousePointRenderer","rebuildObstacleMapOne","addObstacle","rebuildDynamicObstacleMap","moveObstacle","dy","checkCollisionWithObstacles","vectorX","vectorY","vectorLength","iX","iY","obstacleX","obstacleY","MultiMouseWS","setVisible","display","mousePoints","updatePoints","connect","Page","Canvas","getCanvas","flags","setError","message","Demopage","setErrorMessage","getContext","style","cursor","disable","CULL_FACE","DEPTH_TEST","BLEND","initGL","check","MousePointRenderer","loadExtensions","fluid","size_1","document","addEventListener","event","moveStep","key","leftButton","getElementById","rightButton","upButton","downButton","onclick","setupObstacleControls","instantFPS","setInterval","setIndicatorText","lastUpdate","requestAnimationFrame","mainLoop","time","stream","DEPTH_BUFFER_BIT","velocity","pressure","main","targetCanvas","visible","overlayCanvas","createElement","position","top","left","pointerEvents","zIndex","updateCanvasSize","parentElement","appendChild","getComputedStyle","overlayCtx","ResizeObserver","observe","rect","getBoundingClientRect","render","clearRect","isVisible","canvasWidth","canvasHeight","drawPoint","drawMovement","ctx","beginPath","arc","PI","fillStyle","globalAlpha","fill","font","textAlign","textBaseline","fillText","toString","magnitude","endX","endY","moveTo","lineTo","strokeStyle","lineWidth","stroke","angle","atan2","headLength","cos","sin","destroy","removeChild","ObstacleMapShaders","ObstacleMap","_fbo","_addShader","buildAddShader","initObstaclesMap","_texture","_initTexture","addShader","texels","apply","data","tex","Mouse","_posInPx","_pivotInPx","setPosInPx","setMovementInPx","Observers","mouseMove","relX","relY","getSize","mouseDown","_pos","_movementInPx","_movement","toPivot","distToPivot","movementInPx","setRelative","brushInfo","ObstaclesInfo","fluidInfo","obstaclesInfo","NONE","displayInfo","collisionInfo","RESOLUTIONS_CONTROL_ID","updateResolution","values","resolutionValue","includes","split","Tabs","addObserver","getValues","FLOAT_CONTROL_ID","allExtensionsLoaded","Controls","setVisibility","Checkbox","setChecked","updateFloat","useFloatTextures","isChecked","ITERATIONS_CONTROL_ID","updateIterations","iterations","minNbIterations","Range","getValue","TIMESTEP_CONTROL_ID","updateTimestep","STREAM_CONTROL_ID","updateStream","doStream","OBSTACLES_CONTROL_ID","updateObstacles","DYNAMIC","BRUSH_RADIUS_CONTROL_ID_1","updateBrushRadius_1","mouseWheel","delta","setValue","BRUSH_STRENGTH_CONTROL_ID","updateBrushStrength","DISPLAY_MODE_CONTROL_ID","updateDisplayMode","modes","COLOR_INTENSITY_CONTROL_ID","updateColorIntensity","intensity","DISPLAY_COLOR_CONTROL_ID","updateColor","DISPLAY_OBSTACLES_CONTROL_ID","updateDisplayObstacles","DISPLAY_MOUSE_POINTS_CONTROL_ID","updateDisplayMousePoints","DISPLAY_WARM_COLORS_CONTROL_ID","updateDisplayWarmColors","COLLISION_SPEED_CONTROL_ID","updateCollisionSpeed","bindControls","getShaderPrecisionFormat","MEDIUM_FLOAT","precision","extensions","extensions_1","ext","getExtension","shader_1","vbo_1","drawSrc","ShaderSrc","vert","frag","fetch","filepath","request","XMLHttpRequest","open","responseText","batchReplace","includes_1","include","replace","RegExp","toReplace","replacement","fromScript","vertId","fragId","text","build_shaders_1","obstacle_map_shaders_1","rawEncodingStr","fullscreenVert","encodingStr","useFloat","drawVelocitySrc","drawPressureSrc","addVelSrc","advectSrc","jacobiPressureSrc","divergenceSrc","substractGradientSrc","obstaclesVelocitySrc","buildFullscreenShader","src","vertSrc","fragSrc","addSrc","url","onPointsUpdate","fps","isConnected","sendInterval","startSendLoop","onclose","stopSendLoop","onmessage","ev","parse","e","warn","interval","clearInterval","disconnect","close","setFPS","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__"],"sourceRoot":""}